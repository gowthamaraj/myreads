(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r),c=a(11),i=a(14),s=a(5),u=a(6),m=a(8),d=a(7),h=(a(28),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},this.props.currentlyReading.map((function(t){var a={key:t.key,image:t.image,title:t.title,author:t.author,shelf:"currentlyReading"};return a=JSON.stringify(a),o.a.createElement("li",{key:t.key,data:a},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.image,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:e.props.handleChange,defaultValue:"currentlyReading"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.author)))})))))}}]),a}(n.Component)),p=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},this.props.wantToRead.map((function(t){var a={key:t.key,image:t.image,title:t.title,author:t.author,shelf:"wantToRead"};return a=JSON.stringify(a),o.a.createElement("li",{key:t.key,data:a},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.image,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:e.props.handleChange,defaultValue:"wantToRead"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.author)))})))))}}]),a}(n.Component),b=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},this.props.read.map((function(t){var a={key:t.key,image:t.image,title:t.title,author:t.author,shelf:"read"};return a=JSON.stringify(a),o.a.createElement("li",{key:t.key,data:a},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.image,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:e.props.handleChange,defaultValue:"read"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.author)))})))))}}]),a}(n.Component),v=a(10),E=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(h,{currentlyReading:this.props.currentlyReading,handleChange:this.props.handleChange}),o.a.createElement(p,{wantToRead:this.props.wantToRead,handleChange:this.props.handleChange}),o.a.createElement(b,{read:this.props.read,handleChange:this.props.handleChange}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(v.b,{to:"/search"},o.a.createElement("button",null,"Add a book")))))}}]),a}(o.a.Component),g=a(1),k=a(15),f="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var N={Accept:"application/json",Authorization:y},O=function(){return fetch("".concat(f,"/books"),{headers:N}).then((function(e){return e.json()})).then((function(e){return e.books}))},R=function(e,t){return fetch("".concat(f,"/books/").concat(e.key),{method:"PUT",headers:Object(k.a)(Object(k.a)({},N),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},j=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(k.a)(Object(k.a)({},N),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},C=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={books:[]},e.change=function(t){e.setState({books:[]}),console.log(t.target.value),j(t.target.value).then((function(t){var a=[];t.forEach((function(e){if(e.imageLinks&&e.authors){var t={image:e.imageLinks.smallThumbnail,title:e.title,author:e.authors[0],key:e.id};a=[].concat(Object(i.a)(a),[t])}})),e.setState({books:a})})).catch((function(e){console.log(e)}))},e.update=function(t){var a=JSON.parse(t.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data"));R(a,t.target.value).then((function(t){console.log(t),e.props.updateAPI()}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(v.b,{to:"/"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:this.change}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},this.state.books.map((function(t){var a={key:t.key,image:t.image,title:t.title,author:t.author,shelf:"new"};return a=JSON.stringify(a),o.a.createElement("li",{key:Math.random(),data:a},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.image,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:e.update},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.author)))})))))}}]),a}(n.Component),w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={currentlyReading:[],wantToRead:[],read:[]},e.updateAPI=function(t){e.setState({currentlyReading:[],wantToRead:[],read:[]}),O().then((function(t){t.forEach((function(t){var a={image:t.imageLinks.thumbnail,title:t.title,author:t.authors[0],key:t.id};e.setState(Object(c.a)({},t.shelf,[].concat(Object(i.a)(e.state[t.shelf]),[a])))}))}))},e.handleChange=function(t){var a=JSON.parse(t.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data")),n=a.image,o=a.title,r=a.author,l=a.key,s=a.shelf,u=t.target.value,m={image:n,title:o,author:r,key:l};if(R(m,u).then((function(e){console.log(e)})),u!==s){var d;if("none"===u)return void e.setState(Object(c.a)({},s,e.state[s].filter((function(e){return e.key!==l}))));e.setState((d={},Object(c.a)(d,u,[].concat(Object(i.a)(e.state[u]),[m])),Object(c.a)(d,s,e.state[s].filter((function(e){return e.key!==l}))),d))}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.updateAPI()}},{key:"render",value:function(){var e=this;return o.a.createElement(g.c,null,o.a.createElement(g.a,{path:"/",render:function(){return o.a.createElement(E,{currentlyReading:e.state.currentlyReading,wantToRead:e.state.wantToRead,read:e.state.read,handleChange:e.handleChange})},exact:!0}),o.a.createElement(g.a,{path:"/search",render:function(){return o.a.createElement(C,{updateAPI:e.updateAPI})}}))}}]),a}(o.a.Component);a(34);l.a.render(o.a.createElement(v.a,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.795c7bad.chunk.js.map